<!DOCTYPE html>
<html lang="it">

<head>

</head>

<body>

    <button onclick="sendMessage('PROVA')">SEND MESSAGE</button>



    <script>

        var parentWindow = null;

        window.addEventListener("message", function (event) {


            console.log("sono receiver 1 e ho ricevuto: " + event.data);


            /// register parentWindow
            if (event.data = "hello") {
                parentWindow = event.source;
                console.log("BENE, ho ricevuto source")
            }
            /// receive message
            else{

            }

            

        });


        /////////////////////////////////////
        /// send message to parent window
        /////////////////////////////////////
        function sendMessage(message, data = null) {

            if (parentWindow) {
                let msg = {
                    message: message,
                    data: data
                }
                parentWindow.postMessage(msg, "*");
            }
        };

    </script>

</body>

</html>